// TableSort - http://tristen.ca/tablesort/demo/
!function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(!e||"TABLE"!==e.tagName)throw new Error("Element must be a table");this.init(e,n||{})}var e=[],n=function(t){var e;return window.CustomEvent&&"function"==typeof window.CustomEvent?e=new CustomEvent(t):(e=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),e},r=function(t){return t.getAttribute("data-sort")||t.textContent||t.innerText||""},o=function(t,e){return(t=t.trim().toLowerCase())===(e=e.trim().toLowerCase())?0:t<e?1:-1},i=function(t,e){return function(n,r){var o=t(n.td,r.td);return 0===o?e?r.index-n.index:n.index-r.index:o}};t.extend=function(t,n,r){if("function"!=typeof n||"function"!=typeof r)throw new Error("Pattern and sort must be a function");e.push({name:t,pattern:n,sort:r})},t.prototype={init:function(t,e){var n,r,o,i,s=this;if(s.table=t,s.thead=!1,s.options=e,t.rows&&t.rows.length>0)if(t.tHead&&t.tHead.rows.length>0){for(o=0;o<t.tHead.rows.length;o++)if("thead"===t.tHead.rows[o].getAttribute("data-sort-method")){n=t.tHead.rows[o];break}n||(n=t.tHead.rows[t.tHead.rows.length-1]),s.thead=!0}else n=t.rows[0];if(n){var a=function(){s.current&&s.current!==this&&s.current.removeAttribute("aria-sort"),s.current=this,s.sortTable(this)};for(o=0;o<n.cells.length;o++)(i=n.cells[o]).setAttribute("role","columnheader"),"none"!==i.getAttribute("data-sort-method")&&(i.tabindex=0,i.addEventListener("click",a,!1),null!==i.getAttribute("data-sort-default")&&(r=i));r&&(s.current=r,s.sortTable(r))}},sortTable:function(t,s){var a=t.cellIndex,d=o,u="",l=[],h=this.thead?0:1,c=t.getAttribute("data-sort-method"),f=t.getAttribute("aria-sort");if(this.table.dispatchEvent(n("beforeSort")),s||(f="ascending"===f?"descending":"descending"===f?"ascending":this.options.descending?"descending":"ascending",t.setAttribute("aria-sort",f)),!(this.table.rows.length<2)){if(!c){for(;l.length<3&&h<this.table.tBodies[0].rows.length;)(u=(u=r(this.table.tBodies[0].rows[h].cells[a])).trim()).length>0&&l.push(u),h++;if(!l)return}for(h=0;h<e.length;h++)if(u=e[h],c){if(u.name===c){d=u.sort;break}}else if(l.every(u.pattern)){d=u.sort;break}for(this.col=a,h=0;h<this.table.tBodies.length;h++){var b,g=[],w={},m=0,p=0;if(!(this.table.tBodies[h].rows.length<2)){for(b=0;b<this.table.tBodies[h].rows.length;b++)"none"===(u=this.table.tBodies[h].rows[b]).getAttribute("data-sort-method")?w[m]=u:g.push({tr:u,td:r(u.cells[this.col]),index:m}),m++;for("descending"===f?g.sort(i(d,!0)):(g.sort(i(d,!1)),g.reverse()),b=0;b<m;b++)w[b]?(u=w[b],p++):u=g[b-p].tr,this.table.tBodies[h].appendChild(u)}}this.table.dispatchEvent(n("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=t:window.Tablesort=t}(),function(){var t=function(t){return t.replace(/[^\-?0-9.]/g,"")};Tablesort.extend("number",function(t){return t.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,\.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,\.]\d{0,2})?[£\x24Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,\.]){0,1}-?(\d)+([E,e][\-+][\d]+)?%?$/)},function(e,n){return e=t(e),function(t,e){return t=parseFloat(t),e=parseFloat(e),(t=isNaN(t)?0:t)-(e=isNaN(e)?0:e)}(n=t(n),e)})}();
